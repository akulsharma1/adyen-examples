# Adyen Encryption (and some usages in Kaizen)

While working on Kaizen, we had 2 main interactions with Adyen.
- The first was an encryption library. I believe there were some open source encryption libraries in JS and [Python](https://github.com/cheah/adyen-cse-python). We needed to migrate the implementations to Go. You can see it in the `adyen` folder, and how it was used in the `kaizenimplementation` folder. Keep in mind that this was one of my first experiences working on a large codebase which I also wrote from scratch, so the code quality is somewhat questionable. Bear with me!
- The second (and the one which I directly worked on much more) was Adyen's fraud detection system. On Footlocker's website, they had a rule set during sneaker releases where if multiple sneakers were ordered to a given address then to cancel all duplicates. Additionally, if a given order's fraud score was too high, the order would also automatically get cancelled.
    - I worked extensively to understand Adyen's fraud system to find ways to bypass these restrictions to help decrease cancels. Here were some of the notes/things I discovered. I discovered Adyen had a product called ShopperDNA which attempted to link transactions together to create shopper profiles; my overall goal was to have orders to the same house fall under different shopper profiles.
        - Besides address, orders placed under the same IP would instantly get cancelled (likely since they automatically got added to the same shopper profile). Hence, users needed to use proxies to ensure orders wouldn't get cancelled. 
            - However, this would also increase an order's fraud score because the IP geolocation would be far from the address of purchase. This is a loss that was necessary, though.
        - Putting an address line 2 worked well to get past Adyen's "one per address" filter (my guess was that the fraud algorithm just assumed if an address line 2 was put, it was an apartment).
        - USPS has a recommended address format for all addresses, although one can significantly "mistype" their address and it would still get delivered (e.g. `1291 S. First St.` could be "miswritten" as `1291 Soouth 1th Streeet` and still get delivered, bypassing "one per address" filters). However, if an address was too miswritten, I noticed it would trigger the fraud filter.
        - When multiple packages get mailed to the same house, having different first names but the same last name would work pretty well to avoid cancels (e.g. having one package sent to Bob Smith and another to Allison Smith).
        - Certain credit card BINs were flagged and would have higher cancellation rates. For example, at one point privacy cards would have a near 100% cancellation rate on Footlocker.
        - If shopper profiles had previously high cancellation rates or a lot of returns, they would have higher cancellation rates in the future.